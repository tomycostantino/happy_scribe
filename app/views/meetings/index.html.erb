<%= turbo_stream_from Current.user %>
<div class="w-full mx-auto p-8">
  <%= page_header("Meetings") do %>
    <%= secondary_button happy_scribe_imports_path do %>
      <%= download_icon %>
      Import from HappyScribe
    <% end %>
    <%= primary_button new_meeting_path, inline: true do %>
      <%= plus_icon %>
      New Meeting
    <% end %>
  <% end %>

  <div class="flex gap-8">
    <%# Meetings list — left column %>
    <div class="flex-1 min-w-0">
      <% if @meetings.any? %>
        <%= card id: "meetings_list", class: "divide-y divide-gray-100" do %>
          <% @meetings.each do |meeting| %>
            <%= render "meeting", meeting: meeting %>
          <% end %>
        <% end %>
      <% else %>
        <%= card do %>
          <%= empty_state(icon: :microphone, title: "No meetings yet", subtitle: "Upload your first recording to get started.") do %>
            <div class="mt-4">
              <%= primary_button "New Meeting", new_meeting_path %>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <%# Contacts sidebar — right column, lazy loaded %>
    <div class="w-80 shrink-0">
      <%= card class: "p-4 sticky top-8" do %>
        <%= turbo_frame_tag "contacts", src: contacts_path, loading: :lazy do %>
          <div class="animate-pulse space-y-3">
            <div class="h-5 bg-gray-200 rounded w-24"></div>
            <div class="h-8 bg-gray-200 rounded"></div>
            <div class="h-10 bg-gray-100 rounded"></div>
            <div class="h-10 bg-gray-100 rounded"></div>
            <div class="h-10 bg-gray-100 rounded"></div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
