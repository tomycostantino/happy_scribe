<div id="meeting_<%= meeting.id %>_action_items">
<% if meeting.action_items.any? %>
  <details open class="bg-white shadow-sm ring-1 ring-gray-900/5 rounded-lg group">
    <summary class="px-6 py-4 flex items-center justify-between cursor-pointer select-none list-none [&::-webkit-details-marker]:hidden">
      <div class="flex items-center gap-2">
        <%= chevron_right_icon(css_class: "h-4 w-4 text-gray-400 transition-transform group-open:rotate-90") %>
        <%= section_header("Action Items") %>
      </div>
      <span class="text-xs text-gray-500">
        <%= meeting.action_items.done.count %>/<%= meeting.action_items.count %> completed
      </span>
    </summary>
    <div class="px-6 py-4 border-t border-gray-100">
      <ul class="divide-y divide-gray-100">
        <% meeting.action_items.order(:created_at).each do |item| %>
          <li class="flex items-start gap-3 py-3 first:pt-0 last:pb-0">
            <div class="pt-0.5">
              <% if item.completed? %>
                <%= check_circle_icon(css_class: "h-5 w-5 text-green-500") %>
              <% else %>
                <%= circle_icon(css_class: "h-5 w-5 text-gray-300") %>
              <% end %>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm <%= item.completed? ? 'text-gray-400 line-through' : 'text-gray-900' %>">
                <%= item.description %>
              </p>
              <% if item.assignee.present? || item.due_date.present? %>
                <div class="flex items-center gap-3 mt-1">
                  <% if item.assignee.present? %>
                    <span class="text-xs text-gray-500">
                      <%= person_icon(css_class: "inline h-3 w-3 mr-0.5") %>
                      <%= item.assignee %>
                    </span>
                  <% end %>
                  <% if item.due_date.present? %>
                    <span class="text-xs <%= item.due_date < Date.current && !item.completed? ? 'text-red-500' : 'text-gray-500' %>">
                      <%= calendar_icon(css_class: "inline h-3 w-3 mr-0.5") %>
                      <%= short_date(item.due_date) %>
                    </span>
                  <% end %>
                </div>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </details>
<% end %>
</div>
